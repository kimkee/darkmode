<!DOCTYPE html>
<html lang="ko">

<head>
    <title>DarkMode</title>
    <meta charset="utf-8">
    <link href="//kimkee.github.io/ui/static/img/common/favicon.ico" rel="shrtcut icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, shrink-to-fit=no, viewport-fit=cover">
    <link rel="stylesheet" href="./style.css?v6">
</head>
<style>
    .big{transform: scale(2); display: flex; flex-direction: column; align-items: center;}
    .top{position: absolute;left: 20px;top: 20px;display: flex;grid-gap: 10px;}
</style>
<body class="body">

    <button type="button" class="btn-tog-dark" onclick="togDark()"></button>
    
    <div class="big">
        <span class="check-dark"><input type="checkbox" onchange="togDark()"><em></em></span>
        <h3 class="hdt">DARKMODE</h3>
        <span class="check-dark type2"><input type="checkbox" onchange="togDark()"><em></em></span>
    </div>
    

    <div class="top">
        <span class="check-dark"><input type="checkbox" onchange="togDark()"><em></em></span>
    </div>

    <script>
        const darkMode = window.matchMedia('(prefers-color-scheme: dark)');
        const htmlCls  = document.documentElement.classList;
        const btnTogs  = document.querySelectorAll('.btn-tog-dark');
        const chkTogs  = document.querySelectorAll('.check-dark>input');
        const locDark  = JSON.parse(localStorage.getItem('darkmode'));

        const togDark  = ()=> setDark( !htmlCls.contains('dark') );
        const initDark = ()=> locDark === null ? setDark( darkMode.matches ) : setDark( locDark ) ;
        const setDark  = (isDark)=> {
            chkTogs.forEach( tog => tog.checked = isDark );
            btnTogs.forEach( btn => btn.innerHTML = isDark ? 'ðŸŒ›' : 'ðŸŒž' );
            htmlCls.toggle('dark', isDark);
            localStorage.setItem('darkmode',isDark);
        }
        document.addEventListener('DOMContentLoaded', initDark);
        darkMode.addEventListener('change', initDark);
    </script>
</body>

</html>